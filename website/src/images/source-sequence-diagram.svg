<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="574" height="538" contentScriptType="application/ecmascript" contentStyleType="text/css" preserveAspectRatio="none" version="1.1" viewBox="0 0 574 538" zoomAndPan="magnify" style="width:574px;height:538px"><g><rect width="10" height="435.281" x="250.5" y="82.047" fill="#6B9FE6" stroke="#6B9FE6" stroke-width="1"/><rect width="10" height="152.172" x="367.5" y="356.156" fill="#6B9FE6" stroke="#6B9FE6" stroke-width="1"/><rect width="10" height="338.578" x="468.5" y="140.516" fill="#6B9FE6" stroke="#6B9FE6" stroke-width="1"/><line x1="37" x2="37" y1="50.813" y2="526.328" stroke="#6B9FE6" stroke-dasharray="5 5" stroke-width="1"/><line x1="255.5" x2="255.5" y1="50.813" y2="526.328" stroke="#6B9FE6" stroke-dasharray="5 5" stroke-width="1"/><line x1="372.5" x2="372.5" y1="50.813" y2="526.328" stroke="#6B9FE6" stroke-dasharray="5 5" stroke-width="1"/><line x1="473.5" x2="473.5" y1="50.813" y2="526.328" stroke="#6B9FE6" stroke-dasharray="5 5" stroke-width="1"/><rect width="59" height="30.406" x="8" y="19.406" fill="#8AC483" stroke="#8AC483" stroke-width="1.5"/><text x="15" y="39.395" fill="#000" font-family="Roboto" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="45">Runner</text><rect width="94" height="46.813" x="208.5" y="3" fill="#8AC483" stroke="#8AC483" stroke-width="1.5"/><text x="215.5" y="24" fill="#000" font-family="Roboto" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="80">«Serializable»</text><text x="234" y="40.406" fill="#000" font-family="Roboto" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43">Source</text><rect width="58" height="30.406" x="343.5" y="19.406" fill="#8AC483" stroke="#8AC483" stroke-width="1.5"/><text x="350.5" y="39.395" fill="#000" font-family="Roboto" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="44">Reader</text><rect width="86" height="30.406" x="430.5" y="19.406" fill="#8AC483" stroke="#8AC483" stroke-width="1.5"/><text x="437.5" y="39.395" fill="#000" font-family="Roboto" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72">Middleware</text><rect width="10" height="435.281" x="250.5" y="82.047" fill="#6B9FE6" stroke="#6B9FE6" stroke-width="1"/><rect width="10" height="152.172" x="367.5" y="356.156" fill="#6B9FE6" stroke="#6B9FE6" stroke-width="1"/><rect width="10" height="338.578" x="468.5" y="140.516" fill="#6B9FE6" stroke="#6B9FE6" stroke-width="1"/><polygon fill="#67666A" stroke="#67666A" stroke-width="1" points="238.5 78.047 248.5 82.047 238.5 86.047 242.5 82.047"/><line x1="37.5" x2="244.5" y1="82.047" y2="82.047" stroke="#67666A" stroke-width="2"/><text x="44.5" y="76.873" fill="#000" font-family="Roboto" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="80">create source</text><polygon fill="#67666A" stroke="#67666A" stroke-width="1" points="238.5 107.281 248.5 111.281 238.5 115.281 242.5 111.281"/><line x1="37.5" x2="244.5" y1="111.281" y2="111.281" stroke="#67666A" stroke-width="2"/><text x="44.5" y="106.107" fill="#000" font-family="Roboto" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104">get estimated size</text><polygon fill="#67666A" stroke="#67666A" stroke-width="1" points="456.5 136.516 466.5 140.516 456.5 144.516 460.5 140.516"/><line x1="260.5" x2="462.5" y1="140.516" y2="140.516" stroke="#67666A" stroke-width="2"/><text x="267.5" y="135.342" fill="#000" font-family="Roboto" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="77">estimate size</text><polygon fill="#67666A" stroke="#67666A" stroke-width="1" points="48.5 165.75 38.5 169.75 48.5 173.75 44.5 169.75"/><line x1="42.5" x2="249.5" y1="169.75" y2="169.75" stroke="#67666A" stroke-dasharray="2 2" stroke-width="2"/><text x="54.5" y="164.576" fill="#000" font-family="Roboto" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66">size of data</text><line x1="37.5" x2="79.5" y1="214.219" y2="214.219" stroke="#67666A" stroke-width="2"/><line x1="79.5" x2="79.5" y1="214.219" y2="227.219" stroke="#67666A" stroke-width="2"/><line x1="38.5" x2="79.5" y1="227.219" y2="227.219" stroke="#67666A" stroke-width="2"/><polygon fill="#67666A" stroke="#67666A" stroke-width="1" points="48.5 223.219 38.5 227.219 48.5 231.219 44.5 227.219"/><text x="44.5" y="193.81" fill="#000" font-family="Roboto" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="204">compute size / number of executors</text><text x="47.5" y="209.045" fill="#000" font-family="Roboto" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119">= desired bundle size</text><polygon fill="#67666A" stroke="#67666A" stroke-width="1" points="238.5 255.453 248.5 259.453 238.5 263.453 242.5 259.453"/><line x1="37.5" x2="244.5" y1="259.453" y2="259.453" stroke="#67666A" stroke-width="2"/><text x="44.5" y="254.279" fill="#000" font-family="Roboto" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="187">split source (desired bundle size)</text><path fill="#CEE2F2" stroke="#CEE2F2" stroke-width="1" d="M265,240.2188 L265,265.2188 L548,265.2188 L548,250.2188 L538,240.2188 L265,240.2188"/><path fill="#CEE2F2" stroke="#CEE2F2" stroke-width="1" d="M538,240.2188 L538,250.2188 L548,250.2188 L538,240.2188"/><text x="271" y="257.279" fill="#000" font-family="Roboto" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="262">streaming: split based on number of executors</text><polygon fill="#67666A" stroke="#67666A" stroke-width="1" points="48.5 290.688 38.5 294.688 48.5 298.688 44.5 294.688"/><line x1="42.5" x2="249.5" y1="294.688" y2="294.688" stroke="#67666A" stroke-dasharray="2 2" stroke-width="2"/><text x="54.5" y="289.514" fill="#000" font-family="Roboto" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="70">list&lt;source&gt;</text><path fill="#CEE2F2" stroke="#CEE2F2" stroke-width="1" d="M265,275.4531 L265,300.4531 L562,300.4531 L562,285.4531 L552,275.4531 L265,275.4531"/><path fill="#CEE2F2" stroke="#CEE2F2" stroke-width="1" d="M552,275.4531 L552,285.4531 L562,285.4531 L552,275.4531"/><text x="271" y="292.514" fill="#000" font-family="Roboto" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="276">streaming: runner asks the source for watermark</text><polygon fill="#67666A" stroke="#67666A" stroke-width="1" points="238.5 322.922 248.5 326.922 238.5 330.922 242.5 326.922"/><line x1="37.5" x2="244.5" y1="326.922" y2="326.922" stroke="#67666A" stroke-width="2"/><text x="44.5" y="321.748" fill="#000" font-family="Roboto" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="182">for each source create a reader</text><polygon fill="#67666A" stroke="#67666A" stroke-width="1" points="355.5 352.156 365.5 356.156 355.5 360.156 359.5 356.156"/><line x1="260.5" x2="361.5" y1="356.156" y2="356.156" stroke="#67666A" stroke-width="2"/><text x="267.5" y="350.982" fill="#000" font-family="Roboto" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="88">create a reader</text><polygon fill="#67666A" stroke="#67666A" stroke-width="1" points="48.5 384.391 38.5 388.391 48.5 392.391 44.5 388.391"/><line x1="42.5" x2="366.5" y1="388.391" y2="388.391" stroke="#67666A" stroke-dasharray="2 2" stroke-width="2"/><text x="54.5" y="383.217" fill="#000" font-family="Roboto" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="45">readers</text><path fill="#CEE2F2" stroke="#CEE2F2" stroke-width="1" d="M382,369.1563 L382,394.1563 L539,394.1563 L539,379.1563 L529,369.1563 L382,369.1563"/><path fill="#CEE2F2" stroke="#CEE2F2" stroke-width="1" d="M529,369.1563 L529,379.1563 L539,379.1563 L529,369.1563"/><text x="388" y="386.217" fill="#000" font-family="Roboto" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136">streaming: + checkpoint</text><polygon fill="#67666A" stroke="#67666A" stroke-width="1" points="355.5 416.625 365.5 420.625 355.5 424.625 359.5 420.625"/><line x1="37.5" x2="361.5" y1="420.625" y2="420.625" stroke="#67666A" stroke-width="2"/><text x="44.5" y="415.451" fill="#000" font-family="Roboto" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="167">for each reader : start reader</text><polygon fill="#67666A" stroke="#67666A" stroke-width="1" points="355.5 445.859 365.5 449.859 355.5 453.859 359.5 449.859"/><line x1="37.5" x2="361.5" y1="449.859" y2="449.859" stroke="#67666A" stroke-width="2"/><text x="44.5" y="444.685" fill="#000" font-family="Roboto" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="183">read elements until none to read</text><polygon fill="#67666A" stroke="#67666A" stroke-width="1" points="461.5 475.094 471.5 479.094 461.5 483.094 465.5 479.094"/><line x1="377.5" x2="467.5" y1="479.094" y2="479.094" stroke="#67666A" stroke-width="2"/><text x="384.5" y="473.92" fill="#000" font-family="Roboto" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="67">get element</text><polygon fill="#67666A" stroke="#67666A" stroke-width="1" points="360.5 504.328 370.5 508.328 360.5 512.328 364.5 508.328"/><line x1="37.5" x2="366.5" y1="508.328" y2="508.328" stroke="#67666A" stroke-width="2"/><text x="44.5" y="503.154" fill="#000" font-family="Roboto" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="72">close reader</text></g></svg>